# =========================
# PANEL WHATICKET (PRO) + EVOLUTION API
# WhatsApp-only MVP (Railway friendly)
# =========================

# ---- App URLs (IMPORTANT) ----
# Use full https URLs in production (Railway domains).
BACKEND_URL=http://localhost:8080
FRONTEND_URL=http://localhost:3000
PROXY_PORT=8080

# ---- Server ----
PORT=3000
NODE_ENV=development

# ---- Auth ----
JWT_SECRET=change_me
JWT_REFRESH_SECRET=change_me_too

# ---- Database (Postgres recommended) ----
DB_DIALECT=postgres
DB_HOST=localhost
DB_PORT=5432
DB_NAME=whaticket
DB_USER=postgres
DB_PASS=postgres
TZ=America/Argentina/Buenos_Aires

# ---- WhatsApp Provider ----
WHATSAPP_PROVIDER=EVOLUTION

# Evolution API base + key (apikey header)
EVOLUTION_API_URL=https://YOUR-EVOLUTION-API.up.railway.app
EVOLUTION_API_KEY=your_evolution_apikey

# Polling for QR/state in-panel (ms)
EVOLUTION_POLL_MS=3000

# Webhook auth for inbound events (Evolution -> this backend)
EVOLUTION_WEBHOOK_SECRET=change_me_long_random

# If your Evolution instance does NOT attach mediaUrl, enable base64 in webhook.
# This will make inbound media show in the panel (backend will decode+store).
EVOLUTION_WEBHOOK_BASE64=true

# Optional: default instance name if ticket.whatsapp.name is missing
EVOLUTION_INSTANCE=sector7

# Optional: allow/deny inbound numbers (E.164 without +). Comma-separated.
# WHATSAPP_ALLOWLIST=5492494000000,5492494111111
# WHATSAPP_BLOCKLIST=5492494222222

# ---- Observability (optional) ----
# SENTRY_DSN=

# ---- Bot service (optional, but required for /bot tab) ----
BOT_URL=https://YOUR-BOT-SERVICE.up.railway.app
BOT_ADMIN_TOKEN=change_me_admin_token

# Bot webhook secret (panel -> bot forwarding for Evolution webhook)
BOT_WEBHOOK_SECRET=change_me_webhook_secret
